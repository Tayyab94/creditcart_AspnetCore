@using LibraryApp.Data.ViewModels;
@model StripeDashboardVM

@{
    ViewData["Title"] = "Index";
}

<h1>Stripe Overview</h1>

<div class="row">
    <div class="col-md-6">
        <h4>Available Credit: $@string.Format("{0:#.00}", Convert.ToDecimal(Model.Balance.Available.Sum(s => s.Amount)) / 100) </h4>
    </div>
    <div class="col-md-6">
        <h4>Pending Credit $@string.Format("{0:#.00}", Convert.ToDecimal(Model.Balance.Pending.Sum(s => s.Amount)) / 100)</h4>
    </div>
</div>

<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Type</th>
                <th>Status</th>
                <th>Amount</th>
                <th>Created</th>
                <th>Available On</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Transactions)
            {
                <tr>
                    <td>@item.Type</td>
                    <td>@item.Status</td>
                    <td>$@string.Format("{0:#.00}", Convert.ToDecimal(item.Amount) / 100)</td>
                    <td>@item.Created</td>
                    <td>@item.AvailableOn</td>
                </tr>
            }

        </tbody>
    </table>
</div>

<hr />
<h3>Service Customer</h3>
<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Name</th>
                <th>phone</th>
                <th>Amount</th>
                <th>ID</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in Model.Customers)
            {
                <tr>
                    <td>@customer.Name</td>
                    <td>@customer.Phone</td>
                    <td>$@string.Format("{0:#.00}", Convert.ToDecimal(customer.Balance) / 100)</td>
                    <td>@customer.Id</td>
                </tr>
            }

        </tbody>
    </table>
</div>
<hr />
<h3>Service Charges</h3>
<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Amount</th>
                <th>Source</th>
                <th>Receipt Email</th>
                <th>Receipt No</th>
                <th>Receipt Url</th>
                <th>Created</th>
                <th>Customer Id </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var charge in Model.Charges)
            {
                <tr>
                    <td>$@string.Format("{0:#.00}", Convert.ToDecimal(charge.Amount) / 100)</td>
                    <td>@charge.Source</td>
                    <td>@charge.ReceiptEmail</td>
                    <td>@charge.ReceiptNumber</td>
                    <td>@charge.ReceiptUrl</td>
                    <td>@charge.Created</td>
                    <td>@charge.Customer</td>
                </tr>
            }

        </tbody>
    </table>
</div>


<hr />
<h3>Service Dispure</h3>
<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Amount</th>
                <th>Status</th>
                <th>Created</th>
                <th>Currency </th>
                <th>Reason </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var charge in Model.Disputes)
            {
                <tr>
                    <td>$@string.Format("{0:#.00}", Convert.ToDecimal(charge.Amount) / 100)</td>
                    <td>@charge.Status</td>
                    <td>@charge.Created</td>
                    <td>@charge.Currency</td>
                    <td>@charge.Reason</td>
                </tr>
            }

        </tbody>
    </table>
</div>


<hr />
<h3>Service Refund</h3>
<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Amount</th>
                <th>Status</th>
                <th>Created</th>
                <th>Currency </th>
                <th>Reason </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var charge in Model.Refunds)
            {
                <tr>
                    <td>$@string.Format("{0:#.00}", Convert.ToDecimal(charge.Amount) / 100)</td>
                    <td>@charge.Status</td>
                    <td>@charge.Created</td>
                    <td>@charge.Currency</td>
                    <td>@charge.Reason</td>
                </tr>
            }

        </tbody>
    </table>
</div>


<hr />
<h3>Service Product</h3>
<div class="table">
    <table class="table-responsive">
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var charge in Model.Products)
            {
                <tr>
                    
                    <td>@charge.Name</td>
                    <td>@charge.Description</td>
                    <td>@charge.Created</td>
                </tr>
            }

        </tbody>
    </table>
</div>

